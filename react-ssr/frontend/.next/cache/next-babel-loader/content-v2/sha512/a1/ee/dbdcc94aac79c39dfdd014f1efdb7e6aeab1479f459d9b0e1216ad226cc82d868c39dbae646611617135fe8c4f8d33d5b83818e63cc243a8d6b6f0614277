{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\maria\\\\Documents\\\\Recode\\\\Curso\\\\ModuloNoSQL\\\\PitangaCos\\\\frontend\\\\src\\\\components\\\\Login\\\\Login.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Form } from 'react-bootstrap';\nimport { useHistory } from \"react-router-dom\";\nimport * as UserAction from '../../actions/userActions';\nimport './Login.module.css';\n\nfunction Login(props) {\n  const history = useHistory();\n\n  function toSignUpPage() {\n    history.push('/cadastrar');\n  }\n\n  async function login(e) {\n    e.preventDefault();\n    fetch(\"http://localhost:3001/login\", {\n      method: \"post\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"email\": e.target.email.value,\n        \"password\": e.target.password.value\n      })\n    }).then(resposta => resposta.json()).then(resultado => {\n      if (resultado.accessToken) {\n        props.changeToken(resultado.accessToken);\n        fetch(\"http://localhost:3001/admin\", {\n          method: \"GET\",\n          headers: {\n            \"x-access-token\": resultado.accessToken\n          }\n        }).then(result => {\n          result.json();\n        }).then(result => {\n          if (!result) {\n            fetch(\"http://localhost:3001/user\", {\n              method: \"GET\",\n              headers: {\n                \"x-access-token\": resultado.accessToken\n              }\n            }).then(res => res.json()).then(res => {\n              if (res.client) {\n                props.setUser(res.client);\n                props.changeName(res.client.name);\n              }\n            });\n          }\n        });\n      } else {\n        alert(\"Usuário e/ou senha errados!\");\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"login-container\",\n    className: \"collapse container-fluid justify-content-end p-0\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"login\",\n      className: \"p-2 float-right d-lg-flex flex-column\",\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        id: \"form-signin\",\n        onSubmit: login,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"email-container form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            name: \"email\",\n            className: \"form-control\",\n            placeholder: \"Digite seu email\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"password-container form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Senha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            name: \"password\",\n            className: \"form-control\",\n            placeholder: \"Digite sua senha\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"buttons\",\n        className: \"d-flex flex-column p-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          id: \"signin-btn\",\n          className: \"btn text-light my-2\",\n          name: \"signin\",\n          form: \"form-signin\",\n          children: \"Entrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"signup-btn\",\n          className: \"btn my-2\",\n          onClick: toSignUpPage,\n          children: \"Cadastrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\nconst mapStateToProps = state => ({\n  user: state.user\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators(UserAction, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["C:/Users/maria/Documents/Recode/Curso/ModuloNoSQL/PitangaCos/frontend/src/components/Login/Login.js"],"names":["React","connect","bindActionCreators","Form","useHistory","UserAction","Login","props","history","toSignUpPage","push","login","e","preventDefault","fetch","method","headers","body","JSON","stringify","target","email","value","password","then","resposta","json","resultado","accessToken","changeToken","result","res","client","setUser","changeName","name","alert","mapStateToProps","state","user","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { Form } from 'react-bootstrap';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport * as UserAction from '../../actions/userActions';\r\nimport './Login.module.css';\r\n\r\nfunction Login(props){\r\n  const history = useHistory();\r\n\r\n  function toSignUpPage(){\r\n    history.push('/cadastrar')\r\n  }\r\n\r\n  async function login(e){\r\n    e.preventDefault();\r\n    fetch(\"http://localhost:3001/login\", { \r\n      method: \"post\",\r\n        headers: {\r\n        'Content-Type': 'application/json',\r\n      }, \r\n      body:  JSON.stringify({\r\n        \"email\": e.target.email.value,\r\n        \"password\": e.target.password.value\r\n      })\r\n    })\r\n    .then(resposta => resposta.json())\r\n    .then(resultado => {\r\n      if(resultado.accessToken){\r\n        props.changeToken(resultado.accessToken)\r\n        fetch(\"http://localhost:3001/admin\", { \r\n          method: \"GET\",\r\n          headers: {\r\n            \"x-access-token\": resultado.accessToken\r\n          }\r\n        }).then(result => {\r\n          result.json()}\r\n          )\r\n        .then(result => {\r\n          if(!result){\r\n            fetch(\"http://localhost:3001/user\", { \r\n            method: \"GET\",\r\n            headers: {\r\n              \"x-access-token\": resultado.accessToken\r\n            }\r\n          }).then(res => res.json())\r\n            .then(res => {\r\n              if(res.client){\r\n                props.setUser(res.client);\r\n                props.changeName(res.client.name)\r\n              }\r\n            })\r\n          }           \r\n        })\r\n      } \r\n      else {\r\n        alert(\"Usuário e/ou senha errados!\")\r\n      }\r\n      \r\n    }); \r\n  }\r\n\r\n  return(\r\n    <div id=\"login-container\" className= \"collapse container-fluid justify-content-end p-0\">\r\n      \r\n      <div id='login' className=\"p-2 float-right d-lg-flex flex-column\">  \r\n        <Form id=\"form-signin\" onSubmit={login}>\r\n          <div className=\"email-container form-group\">\r\n            <label htmlFor=\"email\">Email</label>\r\n            <input type=\"email\" id='email' name='email' className=\"form-control\" placeholder=\"Digite seu email\" required/>\r\n          </div>\r\n          <div className=\"password-container form-group\">\r\n            <label htmlFor=\"password\">Senha</label>\r\n            <input type=\"password\" id='password' name='password' className=\"form-control\" placeholder=\"Digite sua senha\" required/>\r\n          </div>\r\n        </Form>\r\n        <div id=\"buttons\" className=\"d-flex flex-column p-2\">\r\n          <button type=\"submit\" id='signin-btn' className=\"btn text-light my-2\" name=\"signin\" form=\"form-signin\">Entrar</button>\r\n          <button id=\"signup-btn\" className=\"btn my-2\" onClick={toSignUpPage}>Cadastrar</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = state =>({\r\n  user: state.user\r\n})\r\nconst mapDispatchToProps = (dispatch) => \r\n      bindActionCreators(UserAction, dispatch);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)"]},"metadata":{},"sourceType":"module"}